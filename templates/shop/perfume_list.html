{% extends 'base.html' %}

{% block title %}Productos - Perfume Shop{% endblock %}

{% block content %}
<h1>Nuestros Perfumes</h1>

<div style="margin: 2rem 0; padding: 1rem; background: #f5f5f5; border-radius: 4px;">
    <h3>Filtros</h3>
    <form method="get" style="display: flex; gap: 1rem; flex-wrap: wrap;">
        <div>
            <label>CategorÃ­a:</label>
            <select name="category">
                <option value="">Todas</option>
                {% for cat in categories %}
                <option value="{{ cat.slug }}">{{ cat.name }}</option>
                {% endfor %}
            </select>
        </div>
        <div>
            <label>Marca:</label>
            <select name="brand">
                <option value="">Todas</option>
                {% for brand in brands %}
                <option value="{{ brand.id }}">{{ brand.name }}</option>
                {% endfor %}
            </select>
        </div>
        <div>
            <label>GÃ©nero:</label>
            <select name="gender">
                <option value="">Todos</option>
                <option value="Masculino">Masculino</option>
                <option value="Femenino">Femenino</option>
                <option value="Unisex">Unisex</option>
            </select>
        </div>
        <button type="submit" class="btn">Filtrar</button>
    </form>
</div>

<div class="product-grid">
    {% for perfume in perfumes %}
    <div class="product-card">
        {% if perfume.image %}
        <img src="{{ perfume.image.url }}" alt="{{ perfume.name }}">
        {% else %}
        <div style="width: 100%; height: 200px; background: #eee; display: flex; align-items: center; justify-content: center; border-radius: 4px;">
            <span style="font-size: 3rem;">ðŸŒ¸</span>
        </div>
        {% endif %}
        <h3>{{ perfume.name }}</h3>
        <p>{{ perfume.brand.name }} - {{ perfume.volume_ml }}ml</p>
        <p class="price">L{{ perfume.price }}</p>
        <p style="color: {% if perfume.stock_quantity > 0 %}green{% else %}red{% endif %};">
            {% if perfume.stock_quantity > 0 %}
                En stock: {{ perfume.stock_quantity }}
            {% else %}
                Agotado
            {% endif %}
        </p>
        <a href="{% url 'shop:perfume_detail' perfume.slug %}" class="btn">Ver Detalles</a>
    </div>
    {% empty %}
    <p>No se encontraron perfumes.</p>
    {% endfor %}
</div>
{% endblock %}
