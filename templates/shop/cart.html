{% extends 'base.html' %}

{% block title %}Carrito - PerfumerÃ­a Ã‰lite{% endblock %}

{% block content %}
<h1 style="text-align: center; margin-bottom: 3rem;">ğŸ›’ Mi Carrito de Compras</h1>

{% if cart.items.all %}
<div style="margin: 2rem 0;">
    {% for item in cart.items.all %}
    <div class="cart-item">
        <div class="cart-item-info">
            <h3>{{ item.perfume.name }}</h3>
            <p class="product-brand">{{ item.perfume.brand.name }} â€¢ {{ item.perfume.volume_ml }}ml</p>
            <p style="font-size: 1.1rem; color: var(--color-text-light); margin-top: 0.5rem;">
                Precio unitario: <span style="color: var(--color-secondary); font-weight: 600;">L{{ item.perfume.price }}</span>
            </p>
        </div>
        <div class="cart-actions">
            <form method="post" action="{% url 'shop:update_cart' item.id %}" style="display: inline;">
                {% csrf_token %}
                <input type="hidden" name="action" value="decrease">
                <button type="submit" class="btn btn-secondary" title="Disminuir cantidad">âˆ’</button>
            </form>
            <span class="cart-quantity">{{ item.quantity }}</span>
            <form method="post" action="{% url 'shop:update_cart' item.id %}" style="display: inline;">
                {% csrf_token %}
                <input type="hidden" name="action" value="increase">
                <button type="submit" class="btn btn-secondary" title="Aumentar cantidad">+</button>
            </form>
            <span class="cart-subtotal">L{{ item.get_subtotal }}</span>
            <form method="post" action="{% url 'shop:update_cart' item.id %}" style="display: inline;">
                {% csrf_token %}
                <input type="hidden" name="action" value="remove">
                <button type="submit" class="btn btn-danger" title="Eliminar del carrito">ğŸ—‘ï¸</button>
            </form>
        </div>
    </div>
    {% endfor %}
</div>

<div class="cart-total">
    <h2>Total de la Compra</h2>
    <p style="font-size: 2.5rem; color: var(--color-secondary); font-weight: 400; margin: 1rem 0;">
        L{{ cart.get_total }}
    </p>
    <a href="{% url 'orders:checkout' %}" class="btn btn-large btn-accent" style="margin-top: 1.5rem;">
        Proceder al Pago ğŸ’³
    </a>
    <p style="margin-top: 1.5rem; font-size: 0.95rem; color: var(--color-text-light);">
        <a href="{% url 'shop:perfume_list' %}" style="color: var(--color-accent); text-decoration: underline;">
            â† Continuar comprando
        </a>
    </p>
</div>
{% else %}
<div style="text-align: center; padding: 4rem 2rem; background: var(--color-white); border-radius: 12px; box-shadow: var(--shadow-sm);">
    <div style="font-size: 5rem; margin-bottom: 1rem; opacity: 0.3;">ğŸ›’</div>
    <h2 style="margin-bottom: 1rem; color: var(--color-text-light);">Tu carrito estÃ¡ vacÃ­o</h2>
    <p style="color: var(--color-text-light); margin-bottom: 2rem;">
        Descubre nuestra colecciÃ³n de fragancias exclusivas
    </p>
    <a href="{% url 'shop:perfume_list' %}" class="btn btn-large btn-accent">
        Explorar Productos
    </a>
</div>
{% endif %}
{% endblock %}
